<?xml version="1.0"?>

<!-- 
(c) Copyright, Real-Time Innovations, 2024.  All rights reserved.
RTI grants Licensee a license to use, modify, compile, and create derivative
works of the software solely for use with RTI Connext DDS. Licensee may
redistribute copies of the software provided that all such copies are subject
to this license. The software is provided "as is", with no warranty of any
type, including any warranty for fitness for any purpose. RTI is under no
obligation to maintain or support the software. RTI shall not be liable for
any incidental or consequential damages arising out of the use or inability
to use the software.
-->

<dds xsi:noNamespaceSchemaLocation="http://community.rti.com/schema/current/rti_dds_profiles.xsd"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <!-- QOS Library -->
    <qos_library name="umaa_qos_lib">

        <qos_profile name="default_participant" is_default_participant_factory_profile = "true"> 
            <participant_factory_qos>

                <!-- Control logging verbosity here -->
                <logging>
                    <verbosity>ERROR</verbosity>
                    <category>ALL</category>
                    <print_format>DEBUG</print_format>
	                <output_file></output_file>
                </logging>
            </participant_factory_qos>

            
            <domain_participant_qos>

                <!-- Default transport is UDPv4 | SHMEM, uncomment to disable SHMEM and have all data go over loopback-->
                <!-- <transport_builtin>
                    <mask>UDPv4</mask>
                </transport_builtin> -->

                <!-- Uncomment to enable Monitoring Libraries. Ensure NNDSHOME variable is set. Be aware of resource impact-->
                <!-- <property>
                    <value>
                        <element>
                            <name>rti.monitor.library</name>
                            <value>rtimonitoring</value>
                        </element>
                        <element>
                            <name>rti.monitor.create_function</name>
                            <value>RTIDefaultMonitor_create</value>
                        </element>
                    </value>
                </property> -->

                <resource_limits>
                    <!-- Increase the default for some of the larger types -->
                    <type_object_max_serialized_length>10000</type_object_max_serialized_length>

                  </resource_limits>              

            </domain_participant_qos>
        </qos_profile>

        <!-- 
            This is where we create our QOS profiles and inherit from a Builtin QOS Profile as a starting point.

            We identify the Builtin QOS profile to use by associating the likely data patterns.

            We can then use the "topic_filter" tag to automatically assign the desired QOS as needed per Topic suffix.

            NOTE: Currently there are no official required UMAA QOS settings. 
            You would need to synchronize QOS with the other party you are communicating with. 
            The below is just for reference of the simplest mechanisms/best practices to implement.
        -->

        <!-- This Profile is designed for aperiodic data that we want to ensure delivery -->
        <qos_profile name="commands_profile" base_name="BuiltinQosLib::Pattern.LastValueCache">
            <!-- Reliability: RELIABLE
            Durability: TRANSIENT LOCAL
            History: KEEP LAST
            Depth: 1
            Liveliness: INF
            Deadline: INF -->

            <!-- Override QOS here if desired -->

        </qos_profile>

        <!-- This profile is designed for Periodic data that is high rate -->
        <qos_profile name="stats_profile" base_name="BuiltinQosLib::Pattern.PeriodicData">
            <!-- Reliability: BEST EFFORT
            Durability: VOLATILE
            History: KEEP LAST
            Depth: 100
            Liveliness: INF
            Deadline: DW (4), DR(10) -->

            <!-- Override QOS here if desired -->

        </qos_profile>

        <qos_profile name="base_profile">

            <!-- We can use the Topic suffixes to automatically assign QOS using the "topic_filter" tag.

             All the datawriters/datareaders defined in the <domain_participant> sections are assigned to this BaseQOS
             Then depending on their suffix the selected QOS will be applied.

             These filters will need to be defined based on the behavior of data going over the Topics i.e.
             not all *Report Topics might be sending periodic data -->

            <datawriter_qos topic_filter="*CommandType" base_name="commands_profile" />
            <datareader_qos topic_filter="*CommandType" base_name="commands_profile" />

            <datawriter_qos topic_filter="*ReportType" base_name="stats_profile" />
            <datareader_qos topic_filter="*ReportType" base_name="stats_profile" />

            <datawriter_qos topic_filter="*StatusType" base_name="stats_profile" />
            <datareader_qos topic_filter="*StatusType" base_name="stats_profile" />

            <datawriter_qos topic_filter="*CommandStatusType" base_name="commands_profile" />
            <datareader_qos topic_filter="*CommandStatusType" base_name="commands_profile" />


          </qos_profile>

    </qos_library>

</dds>